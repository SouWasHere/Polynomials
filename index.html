<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Numerical Methods</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  background: #000;
  color: #f5f5f5;
  font-family: 'Inter', sans-serif;
  overflow-x: hidden;
}

h1, h2 {
  font-family: 'Playfair Display', serif;
  letter-spacing: -0.5px;
}

.page {
  position: absolute;
  width: 100%;
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.6s cubic-bezier(.16,1,.3,1);
  pointer-events: none;
}

.page.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: all;
}

.page.exit {
  opacity: 0;
  transform: translateY(-20px);
  filter: blur(4px);
}

.sidebar-link {
  cursor: pointer;
  transition: all 0.3s ease;
  color: #888;
}

.sidebar-link:hover {
  color: #fff;
  letter-spacing: 1px;
}

.sidebar-link.active {
  color: #fff;
}

.card {
  border: 1px solid #222;
  padding: 3rem;
  background: #000;
}

input, select {
  background: transparent;
  border: 1px solid #222;
  padding: 0.75rem;
  width: 100%;
  transition: 0.3s ease;
}

input:focus, select:focus {
  outline: none;
  border-color: #fff;
}

button.primary-btn {
  border: 1px solid #fff;
  padding: 0.75rem 2rem;
  transition: 0.4s ease;
  letter-spacing: 1px;
}

button.primary-btn:hover {
  background: #fff;
  color: #000;
}

.result {
  margin-top: 2rem;
  font-size: 1.2rem;
  letter-spacing: 0.5px;
}
</style>
</head>

<body class="min-h-screen flex">

<!-- SIDEBAR -->
<aside class="w-56 border-r border-zinc-900 px-10 py-16 flex flex-col justify-between">
  <div>
    <h2 class="text-lg mb-16 tracking-widest">NUMERICAL</h2>
    <nav class="flex flex-col gap-6 text-sm uppercase tracking-wider">
      <div class="sidebar-link active" onclick="openPage('basic', this)">Basic</div>
      <div class="sidebar-link" onclick="openPage('error', this)">Error</div>
      <div class="sidebar-link" onclick="openPage('poly', this)">Polynomial</div>
    </nav>
  </div>
  <div class="text-xs text-zinc-600 rotate-180 [writing-mode:vertical-rl] tracking-widest">
    Numerical Methods
  </div>
</aside>

<!-- MAIN -->
<main class="flex-1 px-24 py-24 relative overflow-hidden">

  <div class="max-w-3xl relative">

    <h1 class="text-6xl mb-6">Numerical Methods</h1>
    <p class="text-zinc-500 mb-20 tracking-wide">
      Controlled precision. Minimal form.
    </p>

    <!-- BASIC -->
    <section id="basic" class="page active">
      <div class="card">
        <h2 class="text-3xl mb-10">Basic Operations</h2>

        <div class="grid grid-cols-3 gap-6 mb-8">
          <input type="number" id="num1" placeholder="First number">
          <select id="operator">
            <option value="+">+</option>
            <option value="-">−</option>
            <option value="*">×</option>
            <option value="/">÷</option>
          </select>
          <input type="number" id="num2" placeholder="Second number">
        </div>

        <div class="grid grid-cols-2 gap-6 mb-10">
          <input type="number" id="sig" value="4" placeholder="Decimals">
          <select id="method">
            <option value="chop">Chopping</option>
            <option value="round">Rounding</option>
          </select>
        </div>

        <button onclick="compute()" class="primary-btn">
          Compute
        </button>

        <div id="basicResult" class="result"></div>
      </div>
    </section>

    <!-- ERROR -->
    <section id="error" class="page">
      <div class="card">
        <h2 class="text-3xl mb-10">Error Analysis</h2>

        <input type="number" id="trueVal" placeholder="True Value" class="mb-6">
        <input type="number" id="approxVal" placeholder="Approximation" class="mb-10">

        <button onclick="errorAnalysis()" class="primary-btn">
          Compute
        </button>

        <div id="errorResult" class="result"></div>
      </div>
    </section>

    <!-- POLY -->
    <section id="poly" class="page">
      <div class="card">
        <h2 class="text-3xl mb-10">Polynomial Evaluation</h2>

        <input type="text" id="polyInput" placeholder="2*x**3 + 3*x**2 - 4*x + 1" class="mb-6">
        <input type="number" id="xval" placeholder="Value of x" class="mb-6">

        <div class="grid grid-cols-2 gap-6 mb-10">
          <input type="number" id="polySig" value="4" placeholder="Decimals">
          <select id="polyMethod">
            <option value="chop">Chopping</option>
            <option value="round">Rounding</option>
          </select>
        </div>

        <button onclick="evaluatePoly()" class="primary-btn">
          Evaluate
        </button>

        <div id="polyResult" class="result"></div>
      </div>
    </section>

  </div>
</main>

<script>

let currentPage = "basic";

function openPage(id, el) {
  if (id === currentPage) return;

  const current = document.getElementById(currentPage);
  const next = document.getElementById(id);

  current.classList.remove("active");
  current.classList.add("exit");

  setTimeout(() => {
    current.classList.remove("exit");
    next.classList.add("active");
  }, 300);

  document.querySelectorAll(".sidebar-link")
    .forEach(l => l.classList.remove("active"));
  el.classList.add("active");

  currentPage = id;
}

function chop(num, k) {
  const f = Math.pow(10, k);
  return Math.trunc(num * f) / f;
}

function roundNum(num, k) {
  const f = Math.pow(10, k);
  return Math.round(num * f) / f;
}

function animateValue(element, start, end, decimals, duration = 900) {
  let startTime = null;
  function animation(currentTime) {
    if (!startTime) startTime = currentTime;
    const progress = Math.min((currentTime - startTime) / duration, 1);
    const eased = 1 - Math.pow(1 - progress, 3);
    const value = start + (end - start) * eased;
    element.textContent = value.toFixed(decimals);
    if (progress < 1) requestAnimationFrame(animation);
  }
  requestAnimationFrame(animation);
}

function compute() {
  const a = parseFloat(num1.value);
  const b = parseFloat(num2.value);
  const op = operator.value;
  const k = parseInt(sig.value);
  const m = method.value;

  if (isNaN(a) || isNaN(b)) return;

  let exact;
  if (op === "+") exact = a + b;
  if (op === "-") exact = a - b;
  if (op === "*") exact = a * b;
  if (op === "/") {
    if (b === 0) return;
    exact = a / b;
  }

  const approx = m === "chop" ? chop(exact, k) : roundNum(exact, k);

  basicResult.innerHTML = `
    Exact: <span id="ex1">0</span><br>
    Approximation: <span id="ex2">0</span>
  `;

  animateValue(document.getElementById("ex1"), 0, exact, k);
  animateValue(document.getElementById("ex2"), 0, approx, k);
}

function errorAnalysis() {
  const p = parseFloat(trueVal.value);
  const pstar = parseFloat(approxVal.value);
  if (isNaN(p) || isNaN(pstar)) return;

  const absErr = Math.abs(p - pstar);
  const relErr = p !== 0 ? absErr / Math.abs(p) : 0;

  errorResult.innerHTML = `
    Absolute Error: <span id="e1">0</span><br>
    Relative Error: <span id="e2">0</span>
  `;

  animateValue(document.getElementById("e1"), 0, absErr, 6);
  animateValue(document.getElementById("e2"), 0, relErr, 6);
}

function evaluatePoly() {
  let poly = polyInput.value.trim();
  const x = parseFloat(xval.value);
  const k = parseInt(polySig.value);
  const m = polyMethod.value;

  if (!poly || isNaN(x)) return;

  try {
    // 1️⃣ Replace ^ with **
    poly = poly.replace(/\^/g, "**");

    // 2️⃣ Insert * between number and x (2x → 2*x)
    poly = poly.replace(/(\d)(x)/gi, "$1*$2");

    // 3️⃣ Insert * between x and number (x2 → x*2)
    poly = poly.replace(/(x)(\d)/gi, "$1*$2");

    // 4️⃣ Insert * between number and parentheses: 2(x+1) → 2*(x+1)
    poly = poly.replace(/(\d)\(/g, "$1*(");

    // 5️⃣ Insert * between closing parenthesis and number: (x+1)2 → (x+1)*2
    poly = poly.replace(/\)(\d)/g, ")*$1");

    // 6️⃣ Insert * between x and parentheses: x(x+1) → x*(x+1)
    poly = poly.replace(/x\(/gi, "x*(");

    // 7️⃣ Replace x with actual value
    poly = poly.replace(/x/gi, `(${x})`);

    const exact = eval(poly);
    const approx = m === "chop" ? chop(exact, k) : roundNum(exact, k);

    polyResult.innerHTML = `
      Exact: <span id="p1">0</span><br>
      Approximation: <span id="p2">0</span>
    `;

    animateValue(document.getElementById("p1"), 0, exact, k);
    animateValue(document.getElementById("p2"), 0, approx, k);

  } catch {
    polyResult.innerHTML = "Invalid polynomial format.";
  }
}
}

</script>

</body>
</html>


