<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Numerical Methods</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  font-family: 'Inter', sans-serif;
  background: #f4f4f4;
}

h1, h2 {
  font-family: 'Playfair Display', serif;
}

.page { display: none; }
.page.active { display: block; }

.sidebar-link {
  cursor: pointer;
  transition: 0.2s ease;
}

.sidebar-link:hover {
  opacity: 0.6;
}

.sidebar-link.active {
  font-weight: 600;
}

.card {
  background: white;
  border: 1px solid #e5e5e5;
}

input, select {
  border: 1px solid #ddd;
}

button.primary-btn {
  border: 1px solid black;
  transition: 0.2s ease;
}

button.primary-btn:hover {
  background: black;
  color: white;
}
</style>
</head>

<body class="min-h-screen flex">

<!-- SIDEBAR -->
<aside class="w-48 border-r border-gray-200 px-6 py-10 flex flex-col justify-between">
  <div>
    <h2 class="text-lg font-semibold mb-10 tracking-wide">Numerical</h2>

    <nav class="flex flex-col gap-4 text-sm">
      <div class="sidebar-link active" onclick="openPage('basic', this)">Basic</div>
      <div class="sidebar-link" onclick="openPage('error', this)">Error</div>
      <div class="sidebar-link" onclick="openPage('poly', this)">Polynomial</div>
    </nav>
  </div>

  <div class="text-xs text-gray-400 rotate-180 [writing-mode:vertical-rl]">
    Numerical Methods
  </div>
</aside>

<!-- MAIN -->
<main class="flex-1 px-16 py-16">

  <div class="max-w-3xl">

    <h1 class="text-5xl mb-4">Numerical Methods Calculator</h1>
    <p class="text-gray-500 mb-12">
      Precision computation with controlled approximation.
    </p>

    <!-- BASIC -->
    <section id="basic" class="page active">
      <div class="card p-8">
        <h2 class="text-2xl mb-6">Basic Operations</h2>

        <div class="grid grid-cols-3 gap-4 mb-6">
          <input type="number" id="num1" placeholder="First number" class="p-2">
          <select id="operator" class="p-2">
            <option value="+">+</option>
            <option value="-">−</option>
            <option value="*">×</option>
            <option value="/">÷</option>
          </select>
          <input type="number" id="num2" placeholder="Second number" class="p-2">
        </div>

        <div class="grid grid-cols-2 gap-4 mb-6">
          <input type="number" id="sig" value="4" placeholder="Decimal Places">
          <select id="method">
            <option value="chop">Chopping</option>
            <option value="round">Rounding</option>
          </select>
        </div>

        <button onclick="compute()" class="primary-btn px-6 py-2">
          Compute
        </button>

        <div id="basicResult" class="mt-6 text-lg"></div>
      </div>
    </section>

    <!-- ERROR -->
    <section id="error" class="page">
      <div class="card p-8">
        <h2 class="text-2xl mb-6">Error Analysis</h2>

        <input type="number" id="trueVal" placeholder="True Value" class="p-2 w-full mb-4">
        <input type="number" id="approxVal" placeholder="Approximation" class="p-2 w-full mb-6">

        <button onclick="errorAnalysis()" class="primary-btn px-6 py-2">
          Compute
        </button>

        <div id="errorResult" class="mt-6 text-lg"></div>
      </div>
    </section>

    <!-- POLY -->
    <section id="poly" class="page">
      <div class="card p-8">
        <h2 class="text-2xl mb-6">Polynomial Evaluation</h2>

        <input type="text" id="polyInput" placeholder="2*x**3 + 3*x**2 - 4*x + 1"
          class="p-2 w-full mb-4">

        <input type="number" id="xval" placeholder="Value of x"
          class="p-2 w-full mb-4">

        <div class="grid grid-cols-2 gap-4 mb-6">
          <input type="number" id="polySig" value="4" placeholder="Decimal Places">
          <select id="polyMethod">
            <option value="chop">Chopping</option>
            <option value="round">Rounding</option>
          </select>
        </div>

        <button onclick="evaluatePoly()" class="primary-btn px-6 py-2">
          Evaluate
        </button>

        <div id="polyResult" class="mt-6 text-lg"></div>
      </div>
    </section>

  </div>

</main>

<script>

function openPage(page, el) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(page).classList.add('active');

  document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
  el.classList.add('active');
}

function chop(num, k) {
  const f = Math.pow(10, k);
  return Math.trunc(num * f) / f;
}

function roundNum(num, k) {
  const f = Math.pow(10, k);
  return Math.round(num * f) / f;
}

function compute() {
  const a = parseFloat(num1.value);
  const b = parseFloat(num2.value);
  const op = operator.value;
  const k = parseInt(sig.value);
  const m = method.value;

  if (isNaN(a) || isNaN(b)) {
    basicResult.innerHTML = "Enter valid numbers.";
    return;
  }

  let exact;
  if (op === "+") exact = a + b;
  if (op === "-") exact = a - b;
  if (op === "*") exact = a * b;
  if (op === "/") {
    if (b === 0) {
      basicResult.innerHTML = "Cannot divide by zero.";
      return;
    }
    exact = a / b;
  }

  const approx = m === "chop" ? chop(exact, k) : roundNum(exact, k);

  basicResult.innerHTML =
    `Exact: ${exact}<br>Approximation: ${approx.toFixed(k)}`;
}

function errorAnalysis() {
  const p = parseFloat(trueVal.value);
  const pstar = parseFloat(approxVal.value);

  if (isNaN(p) || isNaN(pstar)) {
    errorResult.innerHTML = "Enter valid numbers.";
    return;
  }

  const absErr = Math.abs(p - pstar);
  const relErr = p !== 0 ? absErr / Math.abs(p) : 0;

  let decimals = relErr === 0 ? "Exact Match"
    : Math.max(0, Math.floor(-Math.log10(relErr)));

  errorResult.innerHTML =
    `Absolute Error: ${absErr}<br>
     Relative Error: ${relErr}<br>
     Correct Decimal Places: ${decimals}`;
}

function evaluatePoly() {
  const poly = document.getElementById("polyInput").value;
  const x = parseFloat(xval.value);
  const k = parseInt(polySig.value);
  const m = polyMethod.value;

  if (!poly || isNaN(x)) {
    polyResult.innerHTML = "Invalid input.";
    return;
  }

  try {
    const exact = eval(poly.replace(/x/g, `(${x})`));
    const approx = m === "chop" ? chop(exact, k) : roundNum(exact, k);

    polyResult.innerHTML =
      `Exact: ${exact}<br>
       Approximation: ${approx.toFixed(k)}`;
  } catch {
    polyResult.innerHTML = "Invalid polynomial format.";
  }
}

</script>

</body>
</html>
