<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Numerical Methods</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  background: #000;
  color: #f5f5f5;
  font-family: 'Inter', sans-serif;
  overflow-x: hidden;
}
h1, h2 {
  font-family: 'Playfair Display', serif;
  letter-spacing: -0.5px;
}
.page {
  position: absolute;
  width: 100%;
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.6s cubic-bezier(.16,1,.3,1);
  pointer-events: none;
}
.page.active { opacity: 1; transform: translateY(0); pointer-events: all; }
.page.exit { opacity: 0; transform: translateY(-20px); filter: blur(4px); }
.sidebar-link { cursor: pointer; transition: all 0.3s ease; color: #888; }
.sidebar-link:hover { color: #fff; letter-spacing: 1px; }
.sidebar-link.active { color: #fff; }
.card { border: 1px solid #222; padding: 3rem; background: #000; }
input, select { background: transparent; border: 1px solid #222; padding: 0.75rem; width: 100%; transition: 0.3s ease; }
input:focus, select:focus { outline: none; border-color: #fff; }
button.primary-btn { border: 1px solid #fff; padding: 0.75rem 2rem; transition: 0.4s ease; letter-spacing: 1px; }
button.primary-btn:hover { background: #fff; color: #000; }
.result { margin-top: 2rem; font-size: 1.1rem; letter-spacing: 0.5px; white-space: pre-line; }
</style>
</head>
<body class="min-h-screen flex">

<!-- SIDEBAR -->
<aside class="w-56 border-r border-zinc-900 px-10 py-16 flex flex-col justify-between">
  <div>
    <h2 class="text-lg mb-16 tracking-widest">NUMERICAL</h2>
    <nav class="flex flex-col gap-6 text-sm uppercase tracking-wider">
      <div class="sidebar-link active" onclick="openPage('basic', this)">Basic</div>
      <div class="sidebar-link" onclick="openPage('error', this)">Error</div>
      <div class="sidebar-link" onclick="openPage('poly', this)">Polynomial</div>
    </nav>
  </div>
  <div class="text-xs text-zinc-600 rotate-180 [writing-mode:vertical-rl] tracking-widest">
    Numerical Methods
  </div>
</aside>

<!-- MAIN -->
<main class="flex-1 px-24 py-24 relative overflow-hidden">
  <div class="max-w-3xl relative">
    <h1 class="text-6xl mb-6">Numerical Methods</h1>
    <p class="text-zinc-500 mb-20 tracking-wide">Controlled precision. Minimal form.</p>

    <!-- BASIC -->
    <section id="basic" class="page active">
      <div class="card">
        <h2 class="text-3xl mb-10">Basic Operations</h2>
        <div class="grid grid-cols-3 gap-6 mb-8">
          <input type="number" id="num1" placeholder="First number">
          <select id="operator">
            <option value="+">+</option>
            <option value="-">−</option>
            <option value="*">×</option>
            <option value="/">÷</option>
          </select>
          <input type="number" id="num2" placeholder="Second number">
        </div>
        <div class="grid grid-cols-2 gap-6 mb-10">
          <input type="number" id="sig" value="4" placeholder="Decimals">
          <select id="method">
            <option value="chop">Chopping</option>
            <option value="round">Rounding</option>
          </select>
        </div>
        <button onclick="compute()" class="primary-btn">Compute</button>
        <div id="basicResult" class="result"></div>
      </div>
    </section>

    <!-- ERROR -->
    <section id="error" class="page">
      <div class="card">
        <h2 class="text-3xl mb-10">Error Analysis</h2>
        <input type="number" id="trueVal" placeholder="True Value" class="mb-6">
        <input type="number" id="approxVal" placeholder="Approximation" class="mb-10">
        <button onclick="errorAnalysis()" class="primary-btn">Compute</button>
        <div id="errorResult" class="result"></div>
      </div>
    </section>

    <!-- POLY -->
    <section id="poly" class="page">
      <div class="card">
        <h2 class="text-3xl mb-10">Polynomial Evaluation</h2>
        <input type="text" id="polyInput" placeholder="2x^3 + 3x^2 - 4^x + 1" class="mb-6">
        <input type="number" id="xval" placeholder="Value of x" class="mb-6">
        <div class="grid grid-cols-2 gap-6 mb-10">
          <input type="number" id="polySig" value="4" placeholder="Decimals">
          <select id="polyMethod">
            <option value="chop">Chopping</option>
            <option value="round">Rounding</option>
          </select>
        </div>
        <button onclick="evaluatePoly()" class="primary-btn">Evaluate</button>
        <div id="polyResult" class="result"></div>
      </div>
    </section>

  </div>
</main>

<script>
let currentPage = "basic";

function openPage(id, el) {
  if (id === currentPage) return;
  const current = document.getElementById(currentPage);
  const next = document.getElementById(id);
  current.classList.remove("active");
  current.classList.add("exit");
  setTimeout(() => { current.classList.remove("exit"); next.classList.add("active"); }, 300);
  document.querySelectorAll(".sidebar-link").forEach(l => l.classList.remove("active"));
  el.classList.add("active");
  currentPage = id;
}

// --- Utility Functions ---
function chop(num, k) {
  if(num===0) return 0;
  const factor = Math.pow(10, k);
  let chopped = Math.trunc(num * factor) / factor;
  if(Math.abs(chopped)<1e-4) return Number(chopped.toExponential(k));
  return chopped;
}

function roundNum(num, k) {
  const factor = Math.pow(10,k);
  return Math.round(num*factor)/factor;
}

function formatNumber(num,k) {
  if(Math.abs(num)<1e-4 && num!==0) return num.toExponential(k);
  return num.toFixed(k);
}

// --- Animate Value ---
function animateValue(element,start,end,k,duration=900){
  let startTime=null;
  function animation(currentTime){
    if(!startTime) startTime=currentTime;
    const progress=Math.min((currentTime-startTime)/duration,1);
    const eased = 1 - Math.pow(1 - progress,3);
    const value = start + (end-start)*eased;
    element.textContent = formatNumber(value,k);
    if(progress<1) requestAnimationFrame(animation);
  }
  requestAnimationFrame(animation);
}

// --- Basic Compute ---
function compute(){
  const a=parseFloat(num1.value), b=parseFloat(num2.value);
  const op = operator.value, k=parseInt(sig.value), m = method.value;
  if(isNaN(a)||isNaN(b)) return;
  let exact;
  if(op==='+') exact=a+b;
  if(op==='-') exact=a-b;
  if(op==='*') exact=a*b;
  if(op==='/'){ if(b===0){alert("Cannot divide by 0"); return;} exact=a/b; }
  const approx = m==='chop'?chop(exact,k):roundNum(exact,k);
  const absErr = Math.abs(exact-approx);
  const relErr = exact!==0?absErr/Math.abs(exact):0;
  const sigDigits = approx!==0?Math.floor(Math.log10(Math.abs(approx)))+1:0;

  basicResult.innerText = `
Exact Value: ${formatNumber(exact,k)}
Approximation (${m}): ${formatNumber(approx,k)}
Absolute Error: ${formatNumber(absErr,k)}
Relative Error: ${formatNumber(relErr,k)}
Significant Digits: ${sigDigits}
Scientific Notation: ${approx.toExponential(k)}
`;
}

// --- Error Analysis ---
function errorAnalysis(){
  const p=parseFloat(trueVal.value), pstar=parseFloat(approxVal.value);
  if(isNaN(p)||isNaN(pstar)) return;
  const absErr=Math.abs(p-pstar), relErr=p!==0?absErr/Math.abs(p):0;
  errorResult.innerText = `
Absolute Error: ${formatNumber(absErr,6)}
Relative Error: ${formatNumber(relErr,6)}
`;
}

// --- Polynomial ---
function evaluatePoly(){
  let poly = polyInput.value.trim();
  const x = parseFloat(xval.value), k=parseInt(polySig.value), m=polyMethod.value;
  if(!poly || isNaN(x)) return;
  try{
    poly=poly.replace(/\^/g,'**');
    poly=poly.replace(/(\d)(x)/gi,'$1*$2');
    poly=poly.replace(/(x)(\d)/gi,'$1*$2');
    poly=poly.replace(/(\d)\(/g,'$1*(');
    poly=poly.replace(/\)(\d)/g,')*$1');
    poly=poly.replace(/x\(/gi,'x*(');
    poly=poly.replace(/x/gi,`(${x})`);
    const exact = eval(poly);
    const approx = m==='chop'?chop(exact,k):roundNum(exact,k);
    const absErr = Math.abs(exact-approx);
    const relErr = exact!==0?absErr/Math.abs(exact):0;
    const sigDigits = approx!==0?Math.floor(Math.log10(Math.abs(approx)))+1:0;
    polyResult.innerText = `
Exact Value: ${formatNumber(exact,k)}
Approximation (${m}): ${formatNumber(approx,k)}
Absolute Error: ${formatNumber(absErr,k)}
Relative Error: ${formatNumber(relErr,k)}
Significant Digits: ${sigDigits}
Scientific Notation: ${approx.toExponential(k)}
`;
  }catch{
    polyResult.innerText = "Invalid polynomial format.";
  }
}
</script>
</body>
</html>
